# 7.1 指针相关定义与使用
- 定义一个指针（Pointer）
```CPP
int a = 6;
int* p;
//数据类型 * 指针变量名;
p = &a;
//指针变量名 = &变量名;
//&为取址符
```
- 指针的简单使用
```CPP
cout << p << endl;
//指针本身代表所指变量的地址
cout << *p << endl;
//此处*为解引用（Dereference），*p代表p地址处所存储的值
```
- 在x64(64位操作系统)下，指针占用内存都为8，在x86(32位操作系统)下占用都为4，无论是何种数据类型
```CPP
sizeof(p) == sizeof(string *) == sizeof(double *)
```
- 空指针指向内存编号为0处，用于初始化指针变量，内存编号0~255为系统占用内存，用户不可访问
```CPP
int* p = NULL;
cout << p << endl;
//输出0000000000000000
```
- 野指针是形如`int * p = (int *)0x1100`的指针，所指定的内存地址不可访问
# 7.2 指针与const
- 常量指针的值不可改变，指向可以改变
```CPP
int a = 6; int b = 9;
const int* p = &a;
//*p=7;不可生效
p = &b;
//指向可改变
```
- 指针常量的指向不能改，其值可以改变
```CPP
int* const q = &a;
//q=&b;不可生效
*q = 7;
//值可以改变
```
- 若同时使用，则指向和值都不可变
```CPP
const int* const r = &a;
//指向的地址和指向的值都无法改变
```
# 7.3 引用
- 引用实质上是指针常量，用的时候会自动解引用
- &号也可表示引用，引用必须要初始化，不能`int &b;`而不指向另一标识符，引用初始化后就不能再改变
```CPP
//数据类型 &标识符2 = 标识符1;
int a = 10;
int &b = a;
//a与b指向同一个地址
b = 20;
cout << a << b;
//输出2020
```
- 不要返回局部变量引用(a在栈区，函数运行完会销毁)
```CPP
int& test()
//理解为数据类型是int的引用形式，故而返回值也是引用
{
	int a = 10;
	return a;
}
//main中的test()相当于返回了a的引用，同样已被清除，但编译器会保留一次，因此若用int& ref = test();去接收test(),则多次打印ref只有第一次输出是正确的10
```
- 可以把a改为静态变量来延长它的寿命，使得能被多次输出(把a放入全局区)
```CPP
int& test()
{
	static int a = 10;
	return a;
}
```
- 函数引用的调用可以作为左值(等号左边)而被修改
```CPP
int& test()
{
	static int a = 10;
	return a;
}
int main()
{
	int& ref = test();
	test() = 1000;
	cout << ref;
	//相当于&a = 1000;输出1000
}
```
- 常量引用
```CPP
const int& ref = 10;
//相当于int temp = 10; const int& ref = temp;
//只写int& ref = 10;不合法，因为引用必引一块合法内存

int print(const int& p)
//const修饰形参，防止更改实际的num
{
	//p = 1000;会报错，防止误操作
	cout << p;
}
int main()
{
	num = 100;
	print(num);
}
```
# 7.4 应用指针与引用
- 使用指针传递数据时，形参指针所指向的地址的值的改变会改变实参的值
```CPP
  void swap(int* p1, int* p2)
{
	int temp = *p1;
	*p1 = *p2;
	*p2 = temp;
}
int main()
{
	int a = 6; int b = 9;
	swap(&a, &b);
	//接收的是地址
	cout << a << b <<endl;
	//输出96
}
```
- 使用引用传递的时候也能做到上述效果
```CPP
  void swap(int &a1, int &b1)
//a1和a指向同一块地址
{
	int temp = a1;
	a1 = b1;
	b1 = temp;
}
int main()
{
	int a = 6; int b = 9;
	swap(a, b);
	//接收的是值
	cout << a << b <<endl;
	//输出96
}
```
- 指针与数组
```CPP
int arr[5] = { 1,3,6,4,2 };
int* p = arr;
//数组名就是地址。无需&
for (int i = 0; i < 5; i++)
{
	cout << *p << endl;
	p++;
}
//打印数组内的所有元素
```
# 7.5 指针的递增递减
- 想要输出以下数组的每个元素
```CPP
int arr[5] = { 1,3,5,7,6 };
int* p = arr;
for (int i = 0; i < 5; i++)
{
	cout << *p;
	p++;
}
```
- `p++`输出13576，p指向的地址递增，指向的值都不改变
- 改为`++p`输出13576，p指向的地址递增，指向的值都不改变
- 改为`*p++`或`*++p`输出13576，++的优先级高于*，故++在p前后结果一样
- 改为`(*p)++`输出12345，p指向的地址不变，指向的值发生递增
- 改为`++(*p)`或`++*p`输出12345，改变的是数组首地址处的值，p指向不变
- 改为`*(p++)`输出13576
- 改为`*(++p)`输出13576